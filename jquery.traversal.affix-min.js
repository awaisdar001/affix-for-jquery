/*
	jQuery affix plugin v1.0 for jQuery 1.3
	2009 Travis Hensgen (Traversal): http://tinyurl.com/avkw78
	License: MIT - http://tinyurl.com/ctnp4f
*/
(function(F){var L,C,A,G,I,E,B,Q,S,T;F.fn.first=function(){if(this.length>0){return this[0]}};F.affixPosition=function(c,d,g){var a=F(c).first();S=F.affixPosition.getSettings(g);B={width:F(window).width(),height:F(window).height()};E={top:F(window).scrollTop(),left:F(window).scrollLeft()};G={width:F(c).outerWidth(),height:F(c).outerHeight()};if(S.from){S.glue.from=S.from}if(S.to){S.glue.to=S.to}if(typeof (d)=="string"){var Y=d.match(/^(window|win|w|offscreen|os|o)(?:\.([nweschv]*))?(?:(\+|-)([0-9]+))?(?:,([0-9]+))?/);if(Y){if(Y[2]){S.glue.from=S.glue.to=Y[2]}if(Y[3]&&Y[4]){var Z=parseInt(Y[4]);var X=Y[5]?parseInt(Y[5]):0;if(Y[3]=="-"){S.inset=[-Z,-Z];if(Y[5]){S.inset[1]=-X}}else{S.inset=[Z,Z];if(Y[5]){S.inset[1]=X}}}if(S.glue.from&&(!S.glue.to||S.glue.to=="")){S.glue.to=S.glue.from}else{if(S.glue.to&&(!S.glue.from||S.glue.from=="")){S.glue.from=S.glue.to}}if(Y[1]=="window"||Y[1]=="w"||Y[1]=="win"){T=H.derive(a)}else{if(Y[1]=="offscreen"||Y[1]=="o"||Y[1]=="os"){T=D.derive(a)}}}}else{L=F(d).first();if(L){if(S.glue){if(!S.glue.to){var e={sw:"ne",w:"e",nw:"se",n:"s",ne:"sw",e:"w",se:"nw",s:"n",c:"c"};S.glue.to=e[S.glue.from]||"c"}if(!S.glue.from){var b={ne:"sw",e:"w",se:"nw",s:"n",sw:"ne",w:"e",nw:"se",n:"s",c:"c"};S.glue.from=b[S.glue.to]||"c"}}T=V.derive(a,L)}}if(g.extendedInfo){return T}else{return{left:T.left,top:T.top}}};F.affixPosition.getSettings=function(X){return F.extend({animate:false,animateOptions:{duration:500,queue:true,easing:null,callback:null},extendedInfo:false,glue:{to:"ne"},glueInsideWindow:true,offsets:[0,0],inset:[0,0],smartOffscreenInset:true,classGlueFromApply:true,classGlueFromPrefix:"glue_",classGlueToApply:true,classGlueToPrefix:"glue_"},X||{})};F.fn.affixAnimate=F.fn.affixa=function(Y,X){return this.affix(Y,F.extend(X,{animate:true}))};F.fn.affix=function(Y,X){F.each(this,function(Z,b){var a=F.affixPosition(b,Y,X||{});if(S.animate){F(b).animate({left:a.left,top:a.top},S.animateOptions)}else{F(b).css({left:a.left,top:a.top})}});return this};var H={derive:function(c,a){var Z=S.glue;var b=W(a||H.eqn,Z.from);var Y=N(b,Z);var X=R(b,Z);if(S.classGlueFromApply){O(c,Z.from,S.classGlueFromPrefix)}return{left:b.left,top:b.top,glue:Z,offsets:Y,insetOffsets:X}},eqn:{n:"wx+h:ww-h:fw,wy",ne:"wx+ww-fw,wy",e:"wx+ww-fw,wy+h:wh-h:fh",se:"wx+ww-fw,wy+wh-fh",s:"wx+h:ww-h:fw,wy+wh-fh",sw:"wx,wy+wh-fh",w:"wx,wy+h:wh-h:fh",nw:"wx,wy",c:"wx+h:ww-h:fw,wy+h:wh-h:fh"}};var D={derive:function(X){return H.derive(X,D.eqn)},eqn:{n:"wx+h:ww-h:fw,wy-fh",nne:"wx+ww-fw,wy-fh",ne:"wx+ww,wy-fh",ene:"wx+ww,wy",e:"wx+ww,wy+h:wh-h:fh",ese:"wx+ww,wy+wh-fh",se:"wx+ww,wy+wh",sse:"wx+ww-fw,wy+wh",s:"wx+h:ww-h:fw,wy+wh",ssw:"wx,wy+wh",sw:"wx-fw,wy+wh",wsw:"wx-fw,wy+wh-fh",w:"wx-fw,wy+h:wh-h:fh",wnw:"wx-fw,wy",nw:"wx-fw,wy-fh",nnw:"wx,wy-fh"}};D.eqn.c=D.eqn.n;D.eqn.nwv=D.eqn.vnw=D.eqn.nnw;D.eqn.nwh=D.eqn.hnw=D.eqn.wnw;D.eqn.nev=D.eqn.vne=D.eqn.nne;D.eqn.neh=D.eqn.hne=D.eqn.ene;D.eqn.sev=D.eqn.vse=D.eqn.sse;D.eqn.seh=D.eqn.hse=D.eqn.ese;D.eqn.swv=D.eqn.vsw=D.eqn.ssw;D.eqn.swh=D.eqn.hsw=D.eqn.wsw;var V={derive:function(d,c){C=F(c).offset();A={width:F(c).outerWidth(),height:F(c).outerHeight()};var a=S.glue;var b=V.getPosition(a);var Z=N(b,a);var X=R(b,a);if(S.glueInsideWindow){var Y=V.glueInsideWindow(b,a);if(Y){a=Y;b=V.getPosition(a);Z=N(b,a);X=R(b,a)}}if(S.classGlueFromApply){O(d,a.from,S.classGlueFromPrefix)}if(S.classGlueToApply){O(c,a.to,S.classGlueToPrefix)}return{left:b.left,top:b.top,glue:a,offsets:Z,insetOffsets:X}},getPosition:function(X){return W(V.eqn,X.from+"_"+X.to,V.tokenValue)},glueInsideWindow:function(e,b){var Z=b.to.search("n")!=-1;var X=b.to.search("s")!=-1;var d=b.to.search("e")!=-1;var g=b.to.search("w")!=-1;var f=e.top<E.top;var a=e.left<E.left;var Y=e.left+G.width>E.left+B.width;var c=e.top+G.height>E.top+B.height;var h=[b.from,b.to];if(!f&&!c&&!Y&&!a){return false}if((f&&Z)||(c&&X)){h[0]=V.swapNS(h[0]);h[1]=V.swapNS(h[1])}if((Y&&d)||(a&&g)){h[0]=V.swapEW(h[0]);h[1]=V.swapEW(h[1])}return{from:h[0],to:h[1]}},swapNS:function(X){return X.replace(/n/g,"T").replace(/s/g,"n").replace(/T/g,"s")},swapEW:function(X){return X.replace(/e/g,"T").replace(/w/g,"e").replace(/T/g,"w")},tokenValue:function(X){switch(X){case"tpw":case"tpe":case"tps":case"tpn":return P(V.eqnm[X.substr(2,1)],V.tokenValue);case"h:tw":case"h:th":return Math.round(V.tokenValue(X.substr(2,2))/2);case"tw":return A.width;case"th":return A.height;case"tpx":return C.left;case"tpy":return C.top;default:return M(X)}return false},eqn:{n_n:"tpx+h:tw-h:fw,tpn",n_ne:"tpe-h:fw,tpn",n_e:"tpe-h:fw,tpn+h:th",n_se:"tpe-h:fw,tps",n_s:"tpw+h:tw-h:fw,tps",n_sw:"tpw-h:fw,tps",n_w:"tpw-h:fw,tpn+h:th",n_nw:"tpw-h:fw,tpn",n_c:"tpw+h:tw-h:fw,tpn+h:th",ne_n:"tpx+h:tw-fw,tpn",ne_ne:"tpe-fw,tpn",ne_e:"tpe-fw,tpn+h:th",ne_se:"tpe-fw,tps",ne_sw:"tpw-fw,tps",ne_s:"tpw+h:tw-fw,tps",ne_w:"tpw-fw,tpn+h:th",ne_nw:"tpw-fw,tpn",ne_c:"tpw+h:tw-fw,tpn+h:th",e_n:"tpx+h:tw-fw,tpn-h:fh",e_ne:"tpe-fw,tpn-h:fh",e_e:"tpe-fw,tpn+h:th-h:fh",e_se:"tpe-fw,tps-h:fh",e_s:"tpw+h:tw-fw,tps-h:fh",e_sw:"tpw-fw,tps-h:fh",e_w:"tpw-fw,tpn+h:th-h:fh",e_nw:"tpw-fw,tpn-h:fh",e_c:"tpw+h:tw-fw,tpn+h:th-h:fh",se_n:"tpx+h:tw-fw,tpn-fh",se_ne:"tpe-fw,tpn-fh",se_e:"tpe-fw,tpn+h:th-fh",se_se:"tpe-fw,tps-fh",se_s:"tpw+h:tw-fw,tps-fh",se_sw:"tpw-fw,tps-fh",se_w:"tpw-fw,tpn+h:th-fh",se_nw:"tpw-fw,tpn-fh",se_c:"tpw+h:tw-fw,tpn+h:th-fh",s_n:"tpx+h:tw-h:fw,tpn-fh",s_ne:"tpe-h:fw,tpn-fh",s_e:"tpe-h:fw,tpn+h:th-fh",s_se:"tpe-h:fw,tps-fh",s_s:"tpw+h:tw-h:fw,tps-fh",s_sw:"tpw-h:fw,tps-fh",s_w:"tpw-h:fw,tpn+h:th-fh",s_nw:"tpw-h:fw,tpn-fh",s_c:"tpw+h:tw-h:fw,tpn+h:th-fh",sw_n:"tpx+h:tw,tpn-fh",sw_ne:"tpe,tpn-fh",sw_e:"tpe,tpn+h:th-fh",sw_se:"tpe,tps-fh",sw_s:"tpw+h:tw,tps-fh",sw_sw:"tpw,tps-fh",sw_w:"tpw,tpn+h:th-fh",sw_nw:"tpw,tpn-fh",sw_c:"tpw+h:tw,tpn+h:th-fh",w_n:"tpx+h:tw,tpn-h:fh",w_ne:"tpe,tpn-h:fh",w_e:"tpe,tpn+h:th-h:fh",w_se:"tpe,tps-h:fh",w_s:"tpw+h:tw,tps-h:fh",w_sw:"tpw,tps-h:fh",w_w:"tpw,tpn+h:th-h:fh",w_nw:"tpw,tpn-h:fh",w_c:"tpw+h:tw,tpn+h:th-h:fh",nw_n:"tpx+h:tw,tpn",nw_ne:"tpe,tpn",nw_e:"tpe,tpn+h:th",nw_se:"tpe,tps",nw_s:"tpw+h:tw,tps",nw_sw:"tpw,tps",nw_w:"tpw,tpn+h:th",nw_nw:"tpw,tpn",nw_c:"tpw+h:tw,tpn+h:th",c_n:"tpx+h:tw-h:fw,tpn-h:fh",c_ne:"tpe-h:fw,tpn-h:fh",c_e:"tpe-h:fw,tpn+h:th-h:fh",c_se:"tpe-h:fw,tps-h:fh",c_s:"tpw+h:tw-h:fw,tps-h:fh",c_sw:"tpw-h:fw,tps-h:fh",c_w:"tpw-h:fw,tpn+h:th-h:fh",c_nw:"tpw-h:fw,tpn-h:fh",c_c:"tpw+h:tw-h:fw,tpn+h:th-h:fh"},eqnm:{n:"tpy",ne:"",e:"tpx+tw",s:"tpy+th",w:"tpx"}};var W=function(a,X,Y){var Z=a[X].split(",");return{left:Math.round(P(Z[0],Y||M)),top:Math.round(P(Z[1],Y||M))}};var O=function(Y,Z,X){F(Y).attr("class",F(Y).attr("class").replace(new RegExp("s?"+X+"[newsvhc]{1,3}s?","gi"),""));F(Y).addClass(X+Z)};var M=function(X){switch(X){case"h:fw":case"h:fh":case"h:wh":case"h:ww":return Math.round(M(X.substr(2,2))/2);case"ww":return B.width;case"wh":return B.height;case"wx":return E.left;case"wy":return E.top;case"fw":return G.width;case"fh":return G.height}return false};var K=function(Y){var X;if(!S.offsets.length&&S.offsets[Y.from+"_"+Y.to]){X=S.offsets[Y.from+"_"+Y.to]}else{if(S.offsets.length&&S.offsets.length==2){X=S.offsets}else{if(S.offsets[Y.from]){X=S.offsets[Y.from]}else{if(S.offsets["*"]){X=S.offsets["*"]}}}}return X};var N=function(b,Z){if(S.offsets){var Y=K(Z)||[0,0];var X=parseInt(Y[0]);var a=parseInt(Y[1]);if(!isNaN(X)){b.left+=X}if(!isNaN(a)){b.top+=a}}return Y};var R=function(Z,X){var Y=U(Z,X);Z.left+=Y[0];Z.top+=Y[1];return Y};var U=function(b,Z){var Y=S.inset;if(Y){if(typeof (Y)=="number"){Y=[Y,Y]}var X={c:"0,0",n:"0,y",nne:"-x,y",ne:"-x,y",ene:"-x,y",e:"-x,0",ese:"-x,-y",se:"-x,-y",sse:"-x,-y",s:"0,-y",ssw:"x,-y",sw:"x,-y",wsw:"x,-y",w:"x,0",wnw:"x,y",nw:"x,y",nnw:"x,y"};if(S.smartOffscreenInset){X.nne="-x,0";X.ene="0,y";X.ese="0,-y";X.sse="-x,0";X.ssw="x,0";X.wsw="0,-y";X.wnw="0,y";X.nnw="x,0"}X.nwv=X.vnw=X.nnw;X.nwh=X.hnw=X.wnw;X.nev=X.vne=X.nne;X.neh=X.hne=X.ene;X.sev=X.vse=X.sse;X.seh=X.hse=X.ese;X.swv=X.vsw=X.ssw;X.swh=X.hsw=X.wsw;var a=(X[Z.to]||X.c).split(",");return[J(a[0],Y),J(a[1],Y)]}return[0,0]};var J=function(Y,Z){var X=Y.match(/([\-]?)([xy0])/);if(X){if(X[2]=="x"){if(X[1]=="-"){return -Z[0]}else{return Z[0]}}else{if(X[2]=="y"){if(X[1]=="-"){return -Z[1]}else{return Z[1]}}}}return 0};var P=function(Y,a){var X=Y.match(/([a-z:]+)|([\+\-])/g);var Z=0;var c;for(var b=0;b<X.length;b++){c=(a||M)(X[b]);if(c!==false){if(b==0){Z+=c}else{if(b%2==0){if(X[b-1]=="+"){Z+=c}else{Z-=c}}}}}return Z}})(jQuery);